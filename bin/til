#!/bin/bash

rootDir=~/projects/til

if [ $# = 0 ] ; then
    echo "第一引数に言語を指定してください"
    exit 1
fi

if [ ! -d ${rootDir} ]; then
    echo "tilディレクトリが存在しません"
    exit 1
fi

ext=$1
langDir=$rootDir/$ext
file=$langDir/sandbox.$ext

if [ ! -d ${langDir} ]; then
    mkdir $langDir
fi

if [ ! -f ${file} ]; then
    touch $file
fi

if tmux ls | grep -E "^$ext" >/dev/null; then
  tmux a -d -t $ext
else
  tmux new -s $ext -c $langDir \; \
    source-file ~/.tmux/new-session \; \
    send-keys "vim sandbox.$ext" Enter\;
fi

